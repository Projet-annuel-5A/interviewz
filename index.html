<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interviewz Overview</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
        }
        header {
            background: #0056b3;
            color: #fff;
            padding: 20px 0;
            border-bottom: #004494 3px solid;
        }
        header a {
            color: #fff;
            text-decoration: none;
            text-transform: uppercase;
            font-size: 16px;
        }
        header ul {
            padding: 0;
            list-style: none;
        }
        header li {
            display: inline;
            padding: 0 20px 0 20px;
        }
        .logo {
            float: left;
        }
        .logo img {
            width: 120px;
        }
        .navbar {
            float: right;
            margin-top: 30px;
        }
        .main {
            padding: 20px;
            background: #fff;
            margin: 20px auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .main h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #0056b3;
        }
        .modules h3 {
            color: #0056b3;
            margin-bottom: 10px;
        }
        .modules p, .modules ul {
            margin-bottom: 20px;
        }
        footer {
            background: #333;
            color: #fff;
            text-align: center;
            padding: 10px 0;
            margin-top: 20px;
        }
        footer p {
            margin: 0;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border: 1px solid #ddd;
            overflow: auto;
        }
        .main section {
            margin-bottom: 40px;
        }
        .main section h2 {
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        a:hover {
            text-decoration: underline;
        }
        header a:hover {
            color: #ddd;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="#"><img src="https://github.com/Projet-annuel-5A/interviewz/blob/main/images/interviewz.png?raw=true" alt="Interviewz logo"></a>
            </div>
            <div class="navbar">
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#modules">Modules</a></li>
                    <li><a href="#endpoints">API Endpoints</a></li>
                    <li><a href="#directory">Directory Structure</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="container main">
        <section id="overview">
            <h1>Interviewz Overview</h1>
            <p>Interviewz is a comprehensive application designed to analyze sentiments detected from video interviews across different sources:</p>
            <ul>
                <li>Audio (voice tone and pitch)</li>
                <li>Text (dialogues)</li>
                <li>Video (facial expressions)</li>
            </ul>
            <p>It uses advanced machine learning models to detect sentiments from the interview data.</p>
        </section>

        <section id="modules">
            <h2>Modules</h2>
            <div class="modules">
                <h3>1. Middleware Module</h3>
                <p><strong>Purpose</strong>: The Middleware module acts as an orchestrator, coordinating the processing tasks across the audio, text, and video modules.</p>
                <p><strong>How It Works</strong>:</p>
                <ul>
                    <li><strong>Initialization</strong>: The FastAPI app sets up the necessary routes and initializes CORS middleware.</li>
                    <li><strong>Preprocessing Endpoint (`/preprocess`)</strong>: Receives session and interview IDs. Initializes a `Process` class instance that manages the workflow. Downloads audio files, performs diarization (speaker identification), and converts speech to text.</li>
                    <li><strong>Prediction Endpoint (`/predict`)</strong>: Coordinates with external APIs for audio, text, and video analysis. Aggregates results and updates the database.</li>
                </ul>
                <p><strong>Key Components</strong>:</p>
                <ul>
                    <li>`app.py`: Defines the FastAPI application, routes, and the main processing logic.</li>
                    <li>`Process` class: Handles downloading, preprocessing, and interfacing with other APIs for complete interview analysis.</li>
                    <li>`utils/utils.py`: Provides utility functions for logging, file handling, and database interactions.</li>
                </ul>

                <h3>2. Audio Module</h3>
                <p><strong>Purpose</strong>: The Audio module processes audio data to extract and analyze emotions.</p>
                <p><strong>How It Works</strong>:</p>
                <ul>
                    <li><strong>Initialization</strong>: Sets up the FastAPI application and model loading.</li>
                    <li><strong>Audio Analysis Endpoint (`/analyse_audio`)</strong>: Fetches audio segments from the database. Splits the audio into segments and predicts emotions using a deep learning model. Updates the results in the database.</li>
                </ul>
                <p><strong>Key Components</strong>:</p>
                <ul>
                    <li>`app.py`: Defines the FastAPI application and routes.</li>
                    <li>`audioEmotions.py`: Contains the `AudioEmotions` class responsible for processing audio segments and predicting emotions.</li>
                    <li>`utils/utils.py`: Manages file operations, logging, and interactions with the Supabase database.</li>
                </ul>

                <h3>3. Text Module</h3>
                <p><strong>Purpose</strong>: The Text module processes textual data to analyze sentiments and emotions.</p>
                <p><strong>How It Works</strong>:</p>
                <ul>
                    <li><strong>Initialization</strong>: Sets up the FastAPI application and model loading.</li>
                    <li><strong>Text Analysis Endpoint (`/analyse_text`)</strong>: Fetches text data from the database. Predicts emotions and sentiments using NLP models. Updates the results in the database.</li>
                </ul>
                <p><strong>Key Components</strong>:</p>
                <ul>
                    <li>`app.py`: Defines the FastAPI application and routes.</li>
                    <li>`textEmotions.py`: Contains the `TextEmotions` class responsible for processing text data and predicting emotions.</li>
                    <li>`utils/utils.py`: Manages file operations, logging, and interactions with the Supabase database.</li>
                </ul>

                <h3>4. Video Module</h3>
                <p><strong>Purpose</strong>: The Video module processes video data to detect emotions through facial recognition.</p>
                <p><strong>How It Works</strong>:</p>
                <ul>
                    <li><strong>Initialization</strong>: Sets up the FastAPI application and model loading.</li>
                    <li><strong>Video Analysis Endpoint (`/analyse_video`)</strong>: Fetches video segments from the database. Splits the video into frames and predicts emotions using facial recognition models. Updates the results in the database.</li>
                </ul>
                <p><strong>Key Components</strong>:</p>
                <ul>
                    <li>`app.py`: Defines the FastAPI application and the main endpoint for video analysis.</li>
                    <li>`videoEmotions.py`: Contains the `VideoEmotions` class responsible for splitting video frames and predicting emotions.</li>
                    <li>`utils/utils.py`: Manages file operations, logging, and interactions with the Supabase database.</li>
                </ul>
            </div>
        </section>

        <section id="endpoints">
            <h2>API Endpoints</h2>
            <h3>Middleware Module</h3>
            <ul>
                <li><strong>GET /health</strong>: Check the health status of the API.</li>
                <li><strong>POST /preprocess</strong>: Preprocess the provided audio file.</li>
                <li><strong>POST /predict</strong>: Start the complete processing of the audio data.</li>
            </ul>
            <h3>Audio Module</h3>
            <ul>
                <li><strong>GET /health</strong>: Check the health status of the API.</li>
                <li><strong>POST /analyse_audio</strong>: Process audio data to analyze emotions.</li>
            </ul>
            <h3>Text Module</h3>
            <ul>
                <li><strong>GET /health</strong>: Check the health status of the API.</li>
                <li><strong>POST /analyse_text</strong>: Process text data to analyze emotions.</li>
            </ul>
            <h3>Video Module</h3>
            <ul>
                <li><strong>GET /health</strong>: Check the health status of the API.</li>
                <li><strong>POST /analyse_video</strong>: Process video data to analyze emotions.</li>
            </ul>
        </section>

        <section id="directory">
            <h2>Directory Structure</h2>
            <pre>
interviewz/
│
├── middleware/
│   ├── app.py
│   └── utils/
│       ├── process.py
│       └── utils.py
│
├── audio/
│   ├── app.py
│   ├── audioEmotions.py
│   └── utils/
│       ├── models.py
│       └── utils.py
│
├── text/
│   ├── app.py
│   ├── textEmotions.py
│   └── utils/
│       ├── models.py
│       └── utils.py
│
├── video/
│   ├── app.py
│   ├── videoEmotions.py
│   └── utils/
│       ├── models.py
│       └── utils.py
            </pre>
        </section>

        <section id="contact">
            <h2>Contact</h2>
            <p>For any questions, please contact the project maintainers at <a href="mailto:contact@interviewz.online">contact@interviewz.online</a>.</p>
        </section>
    </div>

    <footer>
        <p>Interviewz &copy; 2024</p>
    </footer>
</body>
</html>